define(function(require){var Backbone=require("backbone"),_=require("underscore"),NotificationView=Backbone.View.extend({template:function(obj){var html=window.getMixin("notification")(obj);return html},render:function(){var data=this.model.toJSON();return _.extend(data,{createdAt:moment(data.createdAt).fromNow()}),this.$el.html(this.template(data)),this},events:{click:function(){this.$(".notification").toggleClass("active")},"click .notification .icon":function(){var url=this.model.toJSON().url;url&&window.App.book.show(url)}}});return NotificationView});