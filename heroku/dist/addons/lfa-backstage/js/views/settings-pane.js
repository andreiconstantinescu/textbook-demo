define(function(require){var Backbone=require("backbone"),SettingsPane=Backbone.View.extend({initialize:function(opts){opts=opts||{},this.$tabEl=opts.tabEl,this.render()},tabTemplate:function(){return window.getMixin("settings-pane-tab")()},template:function(){return window.getMixin("settings-pane")()},render:function(){function setTeacherMode(newTm){newTm!==tm&&(tm=newTm,tm?(self.$el.find("#teacher-hidden").remove(),self.$el.append('<style id="teacher-visible">.teacher-hidden{display:none;}</style>')):(self.$el.append('<style id="teacher-hidden">.teacher-visible{display:none;}</style>'),self.$el.find("#teacher-visible").remove()),window.App.storage.setItem("teacherMode",tm?"true":"false"))}var self=this;self.$el.html(self.template()),self.$tabEl.html(self.tabTemplate());var content=self.$(".additional-settings"),paneConstructors=window.backstageSettingPanes||[];self.panes=_.map(_.sortBy(paneConstructors,function(o){return o.order}),function(Pane){var paneEl=$("<div></div>");return content.append(paneEl),new Pane({el:paneEl})});var teacherModeToggle=self.$el.find("#teacher-mode-toggle"),teacherMode=window.App.storage.getItem("teacherMode"),tm=3;setTeacherMode(void 0===teacherMode||"true"===teacherMode),teacherModeToggle.toggleClass("checked",tm),teacherModeToggle.on("click",function(){teacherModeToggle.toggleClass("checked"),setTeacherMode(!tm)})}});return SettingsPane.order=10,SettingsPane.activePriority=0,SettingsPane.paneName="settings",window.backstagePanes=window.backstagePanes||[],window.backstagePanes.push(SettingsPane),SettingsPane});